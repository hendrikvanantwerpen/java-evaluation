# Java in Statix Evaluation Projects

This repository contains several projects used to evaluate the Statix
specification in the `java-front` project. It consists of `jdk8` and projects
from Apache Commons.

## JDK8

This repo contains several JDK8 projects.

- The `jdk8\_minimal` project contains only a hand-written source for `Object`
  and can be used to create a minimal JDK Statix Library.

- The `jdk8` projects contains the sources distributed with tge MacOS version
  of AdoptOpenJDK build 1.8.0\_282-b08.

- The 'jdk8\_reduced` project contains a subset of the `jdk8` sources that is
  large enough to cover the classes used in the Apache Commons projects.
  Because of its smaller size, it is more feasible to analyze than the full
  `jdk8` project.

- The `jdk8_\_skeletons` project is a simplified version of the `jdk8\_reduced`
  project. All the class files have been stripped to only contain the type
  definitions. The sources are generated by running `mvn
  org.metaborg:spoofax-maven-plugin:transform@strip-to-skeleton` on the
  `jdk8\_reduced` project.

- The `jdk8_\_interfaces` project is a simplified version of the
  `jdk8\_reduced` project. All the class files have been stripped to only
  contain type definitions, as well as fields and method definitions, but
  without field assignments or method implementations. The sources are
  generated by running `mvn
  org.metaborg:spoofax-maven-plugin:transform@strip-to-interface` on the
  `jdk8\_reduced` project.

### Making a JDK8 Statix Library

The JDK8 projects are turned into Statix Libraries by running `mvn
org.metaborg:spoofax-maven-plugin:transform@make-library`. Note that this can
use a lot of memory and take minutes on the larger JDK8 projects. The resulting
`project.stxlib` must be modified slightly, after which it can be used as a
Statix Library by putting it in the `lib/` folder of the Apache Commons
projects. The required modifications are:

- Move the `Scope("/.", "s_prj-0")` term from the second to the first list
  argument of `Library`.
- The second argument of the `( Scope("/.", "s_prj-0"), Some(...), ...)` tuple
  must be changed to `None()`.

## Apache Commons

The projects from Apache Commons were selected because they require only JDK8
and do not depend on generics. The specific projects are stand-alone and only
depend on JDK8.
